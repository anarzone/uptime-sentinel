{% extends 'base.html.twig' %}

{% set show_sidebar = true %}

{% block title %}Dashboard | Sentinel{% endblock %}

{% block body %}
<div class="dashboard-header" style="margin-bottom: 2.5rem;">
    <h1 class="text-gradient" style="font-size: 2.5rem;">Command Center</h1>
    <p style="color: var(--text-secondary); margin-top: 0.5rem;">Real-time health status of your global infrastructure.</p>
</div>

<div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; margin-bottom: 2.5rem;">
    <div class="glass-card">
        <span style="color: var(--text-muted); font-size: 0.875rem; font-weight: 500;">MONITORS</span>
        <div style="font-size: 2rem; font-weight: 700; margin: 0.5rem 0;">{{ stats.total_monitors }}</div>
        <div style="font-size: 0.875rem; color: var(--text-secondary);">Active & Scheduled</div>
    </div>
    <div class="glass-card">
        <span style="color: var(--text-muted); font-size: 0.875rem; font-weight: 500;">STATUS: UP</span>
        <div style="font-size: 2rem; font-weight: 700; margin: 0.5rem 0; color: var(--success-color);">{{ stats.up_count }}</div>
        <div style="font-size: 0.875rem; color: var(--text-secondary);">Healthy endpoints</div>
    </div>
    <div class="glass-card">
        <span style="color: var(--text-muted); font-size: 0.875rem; font-weight: 500;">STATUS: DOWN</span>
        <div style="font-size: 2rem; font-weight: 700; margin: 0.5rem 0; color: var(--danger-color);">{{ stats.down_count }}</div>
        <div style="font-size: 0.875rem; color: var(--text-secondary);">Requiring attention</div>
    </div>
    <div class="glass-card">
        <span style="color: var(--text-muted); font-size: 0.875rem; font-weight: 500;">AVG UPTIME</span>
        <div style="font-size: 2rem; font-weight: 700; margin: 0.5rem 0;">{{ stats.uptime_avg }}%</div>
        <div style="font-size: 0.875rem; color: var(--text-secondary); display: flex; align-items: center; gap: 0.5rem;">
            <div style="width: 8px; height: 8px; border-radius: 50%; background: var(--success-color);"></div>
            Past 24 hours
        </div>
    </div>
</div>

<div class="main-grid" style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem;">
    <div class="glass-card" style="min-height: 400px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <h3>Performance Matrix</h3>
            <div style="display: flex; gap: 0.5rem;">
                <button class="btn" style="padding: 0.5rem 1rem; font-size: 0.875rem; background: var(--surface-accent);">1H</button>
                <button class="btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">24H</button>
                <button class="btn" style="padding: 0.5rem 1rem; font-size: 0.875rem; background: var(--surface-accent);">7D</button>
            </div>
        </div>
        <div style="height: 300px; margin-top: 1rem;">
            {{ component('LatencyChart') }}
        </div>
    </div>
    
    <div class="glass-card">
        <h3 style="margin-bottom: 1.5rem;">System Alerts</h3>
        <div style="display: flex; flex-direction: column; gap: 1rem;">
            <div style="padding: 1rem; border-radius: var(--radius-md); background: rgba(239, 68, 68, 0.1); border-left: 4px solid var(--danger-color);">
                <div style="font-weight: 600; font-size: 0.875rem; color: #f87171;">Monitor #4 Down</div>
                <div style="font-size: 0.75rem; color: #fca5a5; margin-top: 0.25rem;">Timeout after 5000ms</div>
                <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem;">2 minutes ago</div>
            </div>
            
            <div style="padding: 1rem; border-radius: var(--radius-md); background: rgba(16, 185, 129, 0.1); border-left: 4px solid var(--success-color);">
                <div style="font-weight: 600; font-size: 0.875rem; color: #34d399;">Monitor #1 Recovered</div>
                <div style="font-size: 0.75rem; color: #6ee7b7; margin-top: 0.25rem;">Response time: 42ms</div>
                <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem;">15 minutes ago</div>
            </div>
        </div>
    </div>
</div>

{{ component('MonitorList') }}

<div {{ vue_component('MonitorManager') }}></div>
{% endblock %}
